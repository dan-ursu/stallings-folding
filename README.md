# stallings-folding

A shorter project of mine. Requires a bit of knowledge in group theory. This program lets you perform Stallings' folding procedure on a graph arising out of a finitely-generated subgroup of a free group, and reduce down to a set of free generators.

## Usage

Left-clicking on an edge selects it (and makes it red). Clicking on the same edge again deselects it. Clicking on a second edge folds the two edges if the operation is possible, and does nothing if it isn't. You might want to read the [quirks](#quirks) about how multiple edges are handled as well.

Group elements are entered in the textbox near the bottom. Generators in the original free group should be single letters, for example "a", "b", etc... An element of the form $ab^{-2}a^{-1}b^2$, for example, should be formatted as "ab-b-a-bb". The ``Restart`` button starts the process from scratch for that set of generators. The ``Refresh`` button simply rearranges the existing graph to (hopefully) be more pretty, based on the style that is selected near the top-left.

## Quirks

This program relies on [netgraph](https://pypi.org/project/netgraph/) for creating interactive graphs. This library does not support multigraphs. As such, multiple edges are "simulated" using the labels on the edges. For example, three different edges with the same source/range and different labels of "a", "b", "c" is simulated with a single edge and label of "a,b,c". Duplicates ("multiple" edges with the same source, range, and label) are automatically merged into one at each step (note that they would be eventually folded together anyways).

## The group theory and graph theory

Let $g_1, \dots, g_k \in \mathbb{F}_n$ be finitely many elements of a [free group](https://en.wikipedia.org/wiki/Free_group). The [Nielsen-Schreier theorem](https://en.wikipedia.org/wiki/Nielsen%E2%80%93Schreier_theorem) says that the subgroup generated by $g_1, \dots, g_k$ is itself non-canonically a free group, although it is not obvious what the free generators of this subgroup should be.

We can build a directed graph (potentially multigraph) with a distinguished node and labelled edges as follows. Given any group element $a_1^{\epsilon_1} \dots a_m^{\epsilon_m}$, where $a_i$ are generators of the original free gruop, and each $\epsilon_i$ is either $+1$ or $-1$, draw a cycle of length $m$ starting and ending at the distinguished node, with edges $a_1, \dots, a_m$, respectively. However, if $\epsilon_i = -1$, reverse the direction of the edge corresponding to $a_i$. Such a cycle is drawn for each element $g_1, \dots, g_k$ from before.

Two edges may then be "folded" if they share the same label, and either the same source or the same range (or both). This involves merging the different ranges or different sources (if applicable) into one node, and deleting one of the resulting duplicate edges that arises.

The final "folded" graph is what is obtained when such operations are no longer possible. This is a planar graph, and the free generators correspond to the "holes" in the graph, with each hole semi-canonically giving a generator corresponding to a cycle that starts and ends at the distinguished node, and envelops exactly that one hole.

More details on Stallings' folding can be found in the [references](#references) below.

## Dependencies

The following libraries are required: ``matplotlib``, ``networkx``, ``netgraph``

## References

1. Ilya Kapovich and Alexei Myasnikov, *Stallings foldings and subgroups of free groups*, Journal of Algebra **248** (2002), no. 2, 608--668. [doi : 10.1006/jabr.2001.9033](https://doi.org/10.1006/jabr.2001.9033)

2. John R. Stallings, *Foldings of G-trees*, Arboreal Group Theory (Roger C. Alperin, eds.), Mathematical Sciences Research Institute Publications, vol. 19, Springer, New York, 1991, pp. 355--368. [doi : 10.1007/978-1-4612-3142-4_14](https://doi.org/10.1007/978-1-4612-3142-4_14)
